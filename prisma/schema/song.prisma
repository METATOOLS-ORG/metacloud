model Song {
    id              String  @id @default(ulid())
    date            DateTime @default(now())
    title           String
    url             String
    desc            String
    genre           String

    audioAsset      Asset   @relation("AudioAsset", fields: [audioAssetId], references: [id])
    audioAssetId    String

    coverAsset      Asset?  @relation("CoverAsset", fields: [coverAssetId], references: [id])
    coverAssetId    String?

    author          User    @relation("SongAuthor", fields: [authorId], references: [id])
    authorId        String

    tagPin          Boolean
    tagWip          Boolean
    tagFeedback     Boolean

    likes           SongLike[] @relation("SongLikes")
    comments        SongComment[] @relation("SongComments")
}

model SongLike {
    id              Int     @id @default(autoincrement())

    user            User    @relation("UserLikes", fields: [userId], references: [id])
    userId          String

    // todo: rename field to "song"
    post            Song    @relation("SongLikes", fields: [postId], references: [id])
    postId          String
}

model SongComment {
    id              String @id @default(ulid())
    date            DateTime @default(now())

    user            User    @relation("UserSongComments", fields: [userId], references: [id])
    userId          String

    song            Song    @relation("SongComments", fields: [songId], references: [id])
    songId          String

    songTime        Float
    content         String
}
